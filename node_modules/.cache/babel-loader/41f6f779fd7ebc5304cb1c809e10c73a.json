{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/parve/Desktop/job portal cod/job-portal-react-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/parve/Desktop/job portal cod/job-portal-react-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/parve/Desktop/job portal cod/job-portal-react-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useContext,useState,useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import{candidateLoginWithServer,loginWithServer}from\"../Backend/sendRequestToServer\";import firebase from\"firebase/app\";import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/React.createContext();export function useAuth(){return useContext(AuthContext);}export function AuthProvider(_ref){var children=_ref.children;var _useState=useState(),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];function initFirebase(){return _initFirebase.apply(this,arguments);}function _initFirebase(){_initFirebase=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var firebaseConfig;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:firebaseConfig={apiKey:\"AIzaSyDhqMOYAoxr6mDD8esUzDnqI_JNZZIgC2I\",authDomain:\"job-portal-latest.firebaseapp.com\",projectId:\"job-portal-latest\",storageBucket:\"job-portal-latest.appspot.com\",messagingSenderId:\"786750618884\",appId:\"1:786750618884:web:b98c0dae338ca972a3e451\",measurementId:\"G-M2K3RJ986S\"};// Initialize Firebase\nif(!firebase.apps.length){firebase.initializeApp(firebaseConfig);}else{firebase.app();// if already initialized, use that one\n}console.log(firebase.storage().app);case 3:case\"end\":return _context.stop();}}},_callee);}));return _initFirebase.apply(this,arguments);}function login(_x,_x2,_x3){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email,password,candidate){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return loginWithServer({emailId:email,password:password,isApplicant:candidate});case 2:res=_context2.sent;// Response contains status and User Object\nconsole.log({res:res});if(res.status===200){localStorage.setItem(\"user\",JSON.stringify(res));setCurrentUser(res);setLoading(false);}return _context2.abrupt(\"return\",res);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return _login.apply(this,arguments);}function setUserDetails(res){localStorage.setItem(\"user\",JSON.stringify(res));setCurrentUser(res);}function logout(){localStorage.clear();setCurrentUser();}useEffect(function(){var res=localStorage.getItem(\"user\");if(res){setCurrentUser(JSON.parse(res));}initFirebase();setLoading(false);},[]);var value={currentUser:currentUser,login:login,logout:logout,setUserDetails:setUserDetails};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:!loading&&children});}","map":{"version":3,"sources":["C:/Users/parve/Desktop/job portal cod/job-portal-react-main/src/contexts/AuthContext.jsx"],"names":["React","useContext","useState","useEffect","useHistory","candidateLoginWithServer","loginWithServer","firebase","AuthContext","createContext","useAuth","AuthProvider","children","currentUser","setCurrentUser","loading","setLoading","initFirebase","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","apps","length","initializeApp","app","console","log","storage","login","email","password","candidate","emailId","isApplicant","res","status","localStorage","setItem","JSON","stringify","setUserDetails","logout","clear","getItem","parse","value"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {\r\n  candidateLoginWithServer,\r\n  loginWithServer,\r\n} from \"../Backend/sendRequestToServer\";\r\nimport firebase from \"firebase/app\";\r\n\r\nconst AuthContext = React.createContext();\r\n\r\nexport function useAuth() {\r\n  return useContext(AuthContext);\r\n}\r\n\r\nexport function AuthProvider({ children }) {\r\n  const [currentUser, setCurrentUser] = useState();\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  async function initFirebase() {\r\n    const firebaseConfig = {\r\n      apiKey: \"AIzaSyDhqMOYAoxr6mDD8esUzDnqI_JNZZIgC2I\",\r\n      authDomain: \"job-portal-latest.firebaseapp.com\",\r\n      projectId: \"job-portal-latest\",\r\n      storageBucket: \"job-portal-latest.appspot.com\",\r\n      messagingSenderId: \"786750618884\",\r\n      appId: \"1:786750618884:web:b98c0dae338ca972a3e451\",\r\n      measurementId: \"G-M2K3RJ986S\",\r\n    };\r\n    // Initialize Firebase\r\n    if (!firebase.apps.length) {\r\n      firebase.initializeApp(firebaseConfig);\r\n    } else {\r\n      firebase.app(); // if already initialized, use that one\r\n    }\r\n\r\n    console.log(firebase.storage().app);\r\n  }\r\n\r\n  async function login(email, password, candidate) {\r\n    let res = await loginWithServer({\r\n      emailId: email,\r\n      password: password,\r\n      isApplicant: candidate,\r\n    }); // Response contains status and User Object\r\n\r\n    console.log({ res });\r\n    if (res.status === 200) {\r\n      localStorage.setItem(\"user\", JSON.stringify(res));\r\n      setCurrentUser(res);\r\n      setLoading(false);\r\n    }\r\n    return res;\r\n  }\r\n\r\n  function setUserDetails(res) {\r\n    localStorage.setItem(\"user\", JSON.stringify(res));\r\n    setCurrentUser(res);\r\n  }\r\n\r\n  function logout() {\r\n    localStorage.clear();\r\n    setCurrentUser();\r\n  }\r\n\r\n  useEffect(() => {\r\n    const res = localStorage.getItem(\"user\");\r\n    if (res) {\r\n      setCurrentUser(JSON.parse(res));\r\n    }\r\n    initFirebase();\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const value = {\r\n    currentUser,\r\n    login,\r\n    logout,\r\n    setUserDetails,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}