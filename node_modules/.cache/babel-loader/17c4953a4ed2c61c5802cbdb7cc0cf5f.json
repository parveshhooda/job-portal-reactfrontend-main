{"ast":null,"code":"import _objectSpread from\"C:/Users/parve/Desktop/job portal cod/job-portal-react-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:/Users/parve/Desktop/job portal cod/job-portal-react-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/parve/Desktop/job portal cod/job-portal-react-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/parve/Desktop/job portal cod/job-portal-react-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _defineProperty from\"C:/Users/parve/Desktop/job portal cod/job-portal-react-main/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import React from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import{withStyles}from\"@material-ui/core/styles\";import{ThemeProvider,createMuiTheme}from\"@material-ui/core/styles\";import Card from\"@material-ui/core/Card\";import CardActions from\"@material-ui/core/CardActions\";import CardContent from\"@material-ui/core/CardContent\";import Button from\"@material-ui/core/Button\";import Typography from\"@material-ui/core/Typography\";import TextField from\"@material-ui/core/TextField\";import Select from\"@material-ui/core/Select\";import Input from\"@material-ui/core/Input\";import clsx from\"clsx\";import{CircularProgress}from\"@material-ui/core\";import Checkbox from\"@material-ui/core/Checkbox\";import MenuItem from\"@material-ui/core/MenuItem\";import FormControl from\"@material-ui/core/FormControl\";import InputLabel from\"@material-ui/core/InputLabel\";import ListItemText from\"@material-ui/core/ListItemText\";import TextareaAutosize from\"@material-ui/core/TextareaAutosize\";import Dialog from\"@material-ui/core/Dialog\";import DialogActions from\"@material-ui/core/DialogActions\";import DialogContent from\"@material-ui/core/DialogContent\";import DialogContentText from\"@material-ui/core/DialogContentText\";import DialogTitle from\"@material-ui/core/DialogTitle\";import{green}from\"@material-ui/core/colors\";import FormGroup from\"@material-ui/core/FormGroup\";import FormControlLabel from\"@material-ui/core/FormControlLabel\";import CheckBoxOutlineBlankIcon from\"@material-ui/icons/CheckBoxOutlineBlank\";import CheckBoxIcon from\"@material-ui/icons/CheckBox\";import Favorite from\"@material-ui/icons/Favorite\";import FavoriteBorder from\"@material-ui/icons/FavoriteBorder\";import Accordion from\"@material-ui/core/Accordion\";import AccordionSummary from\"@material-ui/core/AccordionSummary\";import AccordionDetails from\"@material-ui/core/AccordionDetails\";import ExpandMoreIcon from\"@material-ui/icons/ExpandMore\";import Paper from\"@material-ui/core/Paper\";import Grid from\"@material-ui/core/Grid\";import{useHistory}from\"react-router\";import{useState,useContext,useEffect}from\"react\";import{drawerCollapseable}from\"./Constants\";import Navbar from\"../components/employer/Navbar\";import{addUser,changePassword,changeToNewPassword,sendOtpVerification,verifyOtp,viewRoleFromServer}from\"../Backend/sendRequestToServer\";import swal from\"sweetalert\";import{useAuth}from\"../contexts/AuthContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var useStyles=makeStyles(function(theme){var _ref;return _ref={root:{// minWidth: 275,\n// margin: \"15px 15px 15px 15px\",\nborderRadius:\"10px\",padding:\"12px\",display:\"flex\",flexDirection:\"column\",justifyContent:\"center\",textAlign:\"center\",boxShadow:\"0 5px 10px rgba(0,0,0,0.19), 0 3px 3px rgba(0,0,0,0.21)\"},form:{margin:\"15px 15px 15px 15px\",borderRadius:\"10px\",padding:\"12px\",display:\"flex\",flexDirection:\"column\",justifyContent:\"center\",textAlign:\"center\"},pos:{marginTop:20},formControl:{margin:theme.spacing(1),minWidth:120,maxWidth:300},selectEmpty:{marginTop:theme.spacing(2)},bullet:{display:\"inline-block\",margin:\"0 2px\",transform:\"scale(0.8)\"},title:{fontSize:14}},_defineProperty(_ref,\"pos\",{marginBottom:12}),_defineProperty(_ref,\"label\",{color:\"#000\"}),_defineProperty(_ref,\"textField\",{\"& .MuiInputBase-input\":{color:\"#000\"}}),_defineProperty(_ref,\"errMsg\",{color:\"red\",fontWeight:\"bold\",fontSize:\"small\",marginBottom:\"10px\",textAlign:\"left\"}),_ref;});var ResetPassword=function ResetPassword(props){var _jsx2;var history=useHistory();var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),showSpinner=_React$useState2[0],setShowSpinner=_React$useState2[1];var handleReset=function handleReset(){history.push(\"/\");};var _useAuth=useAuth(),currentUser=_useAuth.currentUser;var classes=useStyles();var ITEM_HEIGHT=48;var ITEM_PADDING_TOP=8;var MenuProps={PaperProps:{style:{maxHeight:ITEM_HEIGHT*4.5+ITEM_PADDING_TOP,width:250,backgroundColor:\"#fff\",color:\"#000\"}}};var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),otpSent=_useState4[0],setOtpSent=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),otp=_useState6[0],setOtp=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showPassword=_useState8[0],setShowPassword=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),user=_useState10[0],setUser=_useState10[1];var otpButton=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();if(email){_context.next=3;break;}return _context.abrupt(\"return\");case 3:_context.next=5;return sendOtpVerification({emailId:email});case 5:res=_context.sent;if(res.status===200){swal(\"Success!\",\"Email Sent\",\"success\").then(function(value){return setOtpSent(true);});}else{console.log(res);swal(\"Failed!\",\"Failed to send Email. Try Again!!!\",\"error\");}case 7:case\"end\":return _context.stop();}}},_callee);}));return function otpButton(_x){return _ref2.apply(this,arguments);};}();var verifyOtpButton=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();if(otp){_context2.next=3;break;}return _context2.abrupt(\"return\");case 3:setShowSpinner(true);_context2.next=6;return verifyOtp({emailId:email,otp:otp});case 6:res=_context2.sent;if(res.status===200){setShowSpinner(false);swal(\"Success!\",\"Otp Verified\",\"success\").then(function(value){return setShowPassword(true);});delete res.status;setUser(res);}else{setShowSpinner(false);console.log(res);swal(\"Failed!\",\"Failed to verify otp. Try Again!!!\",\"error\");}case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function verifyOtpButton(_x2){return _ref3.apply(this,arguments);};}();var setNewPassword=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();if(!(!newPass||!confirmPass||newPass!==confirmPass)){_context3.next=3;break;}return _context3.abrupt(\"return\");case 3:setShowSpinner(true);_context3.next=6;return changeToNewPassword(_objectSpread(_objectSpread({},user),password));case 6:res=_context3.sent;if(res.status===200){setShowSpinner(false);swal(\"Success!\",\"Password Changed\",\"success\").then(function(value){return handleReset();});}else{setShowSpinner(false);console.log(res);swal(\"Failed!\",\"Failed to change Password. Try Again!!!\",\"error\");}case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function setNewPassword(_x3){return _ref4.apply(this,arguments);};}();// email validation\nvar validateEmail=function validateEmail(email){var re=/^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;return re.test(email);};// phone validation\nvar validatePhone=function validatePhone(mob){var re=/^[0-9]{10}$/;return re.test(mob);};// custom button\nvar ColorButton=withStyles(function(theme){return{root:{backgroundColor:\"#FCBF00\",\"&:hover\":{backgroundColor:\"#FCBF00\"}}};})(Button);// const classes = useStyles();\nvar bull=/*#__PURE__*/_jsx(\"span\",{className:classes.bullet,children:\"\\u2022\"});var _useState11=useState({newPass:\"\",confirmPass:\"\"}),_useState12=_slicedToArray(_useState11,2),password=_useState12[0],setPassword=_useState12[1];var newPass=password.newPass,confirmPass=password.confirmPass;var onChange=function onChange(e){setPassword(_objectSpread(_objectSpread({},password),{},_defineProperty({},e.target.name,e.target.value)));};return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5 pt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row align-items-center justify-content-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-6\",children:/*#__PURE__*/_jsxs(Card,{className:classes.root,variant:\"outlined\",children:[/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h2\",children:\"Forgot Password\"}),/*#__PURE__*/_jsxs(\"form\",{className:classes.form,noValidate:true,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(TextField,{disabled:otpSent,id:\"outlined-basic\",label:\"Email*\",name:\"email\",variant:\"outlined\",type:\"email\",onChange:function onChange(e){return setEmail(e.target.value);},style:{marginBottom:\"10px\"}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",onClick:function onClick(e){console.log(\"Reset function\");otpButton(e);},children:\"Send OTP\"}),/*#__PURE__*/_jsx(\"br\",{}),otpSent&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"OTP*\",name:\"otp\",type:\"password\",variant:\"outlined\",onChange:function onChange(e){return setOtp(e.target.value);},style:{marginBottom:\"10px\"}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(ColorButton,{variant:\"contained\",color:\"primary\",onClick:function onClick(e){console.log(\"verify function\");verifyOtpButton(e);},children:\"Verify Otp\"})]}),/*#__PURE__*/_jsx(\"br\",{}),showPassword&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(TextField,{id:\"outlined-basic\",label:\"New Password*\",name:\"newPass\",type:\"password\",variant:\"outlined\",onChange:onChange,style:{marginBottom:\"10px\"}}),/*#__PURE__*/_jsx(TextField,(_jsx2={label:\"Password*\"},_defineProperty(_jsx2,\"label\",\"Confirm Password*\"),_defineProperty(_jsx2,\"name\",\"confirmPass\"),_defineProperty(_jsx2,\"type\",\"password\"),_defineProperty(_jsx2,\"variant\",\"outlined\"),_defineProperty(_jsx2,\"onChange\",onChange),_defineProperty(_jsx2,\"style\",{marginBottom:\"10px\"}),_jsx2)),/*#__PURE__*/_jsx(ColorButton,{variant:\"contained\",color:\"primary\",onClick:function onClick(e){console.log(\"new password function\");setNewPassword(e);},children:\"Submit\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{children:showSpinner?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{style:{marginLeft:\"10px\",color:\"#ff0000\"},children:/*#__PURE__*/_jsx(\"h5\",{children:\"Please DO NOT REFRESH the page...\"})}),/*#__PURE__*/_jsx(CircularProgress,{style:{color:\"#18D26E\"}})]}):/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsx(CardActions,{style:{justifyContent:\"center\",fontWeight:\"bold\"}})]})})})})});};export default ResetPassword;","map":{"version":3,"sources":["C:/Users/parve/Desktop/job portal cod/job-portal-react-main/src/Common/ForgotPassword.jsx"],"names":["React","makeStyles","withStyles","ThemeProvider","createMuiTheme","Card","CardActions","CardContent","Button","Typography","TextField","Select","Input","clsx","CircularProgress","Checkbox","MenuItem","FormControl","InputLabel","ListItemText","TextareaAutosize","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","green","FormGroup","FormControlLabel","CheckBoxOutlineBlankIcon","CheckBoxIcon","Favorite","FavoriteBorder","Accordion","AccordionSummary","AccordionDetails","ExpandMoreIcon","Paper","Grid","useHistory","useState","useContext","useEffect","drawerCollapseable","Navbar","addUser","changePassword","changeToNewPassword","sendOtpVerification","verifyOtp","viewRoleFromServer","swal","useAuth","useStyles","theme","root","borderRadius","padding","display","flexDirection","justifyContent","textAlign","boxShadow","form","margin","pos","marginTop","formControl","spacing","minWidth","maxWidth","selectEmpty","bullet","transform","title","fontSize","marginBottom","color","fontWeight","ResetPassword","props","history","showSpinner","setShowSpinner","handleReset","push","currentUser","classes","ITEM_HEIGHT","ITEM_PADDING_TOP","MenuProps","PaperProps","style","maxHeight","width","backgroundColor","email","setEmail","otpSent","setOtpSent","otp","setOtp","showPassword","setShowPassword","user","setUser","otpButton","e","preventDefault","emailId","res","status","then","value","console","log","verifyOtpButton","setNewPassword","newPass","confirmPass","password","validateEmail","re","test","validatePhone","mob","ColorButton","bull","setPassword","onChange","target","name","marginLeft"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport { ThemeProvider, createMuiTheme } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Select from \"@material-ui/core/Select\";\nimport Input from \"@material-ui/core/Input\";\nimport clsx from \"clsx\";\nimport { CircularProgress } from \"@material-ui/core\";\nimport Checkbox from \"@material-ui/core/Checkbox\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport TextareaAutosize from \"@material-ui/core/TextareaAutosize\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport { green } from \"@material-ui/core/colors\";\nimport FormGroup from \"@material-ui/core/FormGroup\";\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\nimport CheckBoxOutlineBlankIcon from \"@material-ui/icons/CheckBoxOutlineBlank\";\nimport CheckBoxIcon from \"@material-ui/icons/CheckBox\";\nimport Favorite from \"@material-ui/icons/Favorite\";\nimport FavoriteBorder from \"@material-ui/icons/FavoriteBorder\";\n\nimport Accordion from \"@material-ui/core/Accordion\";\nimport AccordionSummary from \"@material-ui/core/AccordionSummary\";\nimport AccordionDetails from \"@material-ui/core/AccordionDetails\";\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\n\nimport Paper from \"@material-ui/core/Paper\";\nimport Grid from \"@material-ui/core/Grid\";\n\nimport { useHistory } from \"react-router\";\nimport { useState, useContext, useEffect } from \"react\";\nimport { drawerCollapseable } from \"./Constants\";\nimport Navbar from \"../components/employer/Navbar\";\nimport {\n  addUser,\n  changePassword,\n  changeToNewPassword,\n  sendOtpVerification,\n  verifyOtp,\n  viewRoleFromServer,\n} from \"../Backend/sendRequestToServer\";\nimport swal from \"sweetalert\";\nimport { useAuth } from \"../contexts/AuthContext\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    // minWidth: 275,\n    // margin: \"15px 15px 15px 15px\",\n    borderRadius: \"10px\",\n    padding: \"12px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    textAlign: \"center\",\n    boxShadow: \"0 5px 10px rgba(0,0,0,0.19), 0 3px 3px rgba(0,0,0,0.21)\",\n  },\n  form: {\n    margin: \"15px 15px 15px 15px\",\n    borderRadius: \"10px\",\n    padding: \"12px\",\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n    textAlign: \"center\",\n  },\n  pos: {\n    marginTop: 20,\n  },\n\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n    maxWidth: 300,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  bullet: {\n    display: \"inline-block\",\n    margin: \"0 2px\",\n    transform: \"scale(0.8)\",\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  label: {\n    color: \"#000\",\n  },\n\n  textField: {\n    \"& .MuiInputBase-input\": {\n      color: \"#000\",\n    },\n  },\n\n  errMsg: {\n    color: \"red\",\n    fontWeight: \"bold\",\n    fontSize: \"small\",\n    marginBottom: \"10px\",\n    textAlign: \"left\",\n  },\n}));\n\nconst ResetPassword = (props) => {\n  let history = useHistory();\n  const [showSpinner, setShowSpinner] = React.useState(false);\n  const handleReset = () => {\n    history.push(\"/\");\n  };\n  const { currentUser } = useAuth();\n\n  const classes = useStyles();\n\n  const ITEM_HEIGHT = 48;\n  const ITEM_PADDING_TOP = 8;\n\n  const MenuProps = {\n    PaperProps: {\n      style: {\n        maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n        width: 250,\n        backgroundColor: \"#fff\",\n        color: \"#000\",\n      },\n    },\n  };\n\n  const [email, setEmail] = useState(\"\");\n\n  const [otpSent, setOtpSent] = useState(false);\n\n  const [otp, setOtp] = useState(\"\");\n\n  const [showPassword, setShowPassword] = useState(false);\n\n  const [user, setUser] = useState(null);\n\n  const otpButton = async (e) => {\n    e.preventDefault();\n\n    if (!email) {\n      return;\n    }\n\n    const res = await sendOtpVerification({\n      emailId: email,\n    });\n\n    if (res.status === 200) {\n      swal(\"Success!\", \"Email Sent\", \"success\").then((value) =>\n        setOtpSent(true)\n      );\n    } else {\n      console.log(res);\n      swal(\"Failed!\", \"Failed to send Email. Try Again!!!\", \"error\");\n    }\n  };\n\n  const verifyOtpButton = async (e) => {\n    e.preventDefault();\n    if (!otp) {\n      return;\n    }\n    setShowSpinner(true);\n    const res = await verifyOtp({\n      emailId: email,\n      otp: otp,\n    });\n\n    if (res.status === 200) {\n      setShowSpinner(false);\n      swal(\"Success!\", \"Otp Verified\", \"success\").then((value) =>\n        setShowPassword(true)\n      );\n      delete res.status;\n      setUser(res);\n    } else {\n      setShowSpinner(false);\n      console.log(res);\n      swal(\"Failed!\", \"Failed to verify otp. Try Again!!!\", \"error\");\n    }\n  };\n\n  const setNewPassword = async (e) => {\n    e.preventDefault();\n    if (!newPass || !confirmPass || newPass !== confirmPass) {\n      return;\n    }\n    setShowSpinner(true);\n    const res = await changeToNewPassword({ ...user, ...password });\n\n    if (res.status === 200) {\n      setShowSpinner(false);\n      swal(\"Success!\", \"Password Changed\", \"success\").then((value) =>\n        handleReset()\n      );\n    } else {\n      setShowSpinner(false);\n      console.log(res);\n      swal(\"Failed!\", \"Failed to change Password. Try Again!!!\", \"error\");\n    }\n  };\n\n  // email validation\n  const validateEmail = (email) => {\n    const re =\n      /^(([^<>()[\\]\\\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(email);\n  };\n  // phone validation\n  const validatePhone = (mob) => {\n    const re = /^[0-9]{10}$/;\n    return re.test(mob);\n  };\n\n  // custom button\n\n  const ColorButton = withStyles((theme) => ({\n    root: {\n      backgroundColor: \"#FCBF00\",\n      \"&:hover\": {\n        backgroundColor: \"#FCBF00\",\n      },\n    },\n  }))(Button);\n\n  // const classes = useStyles();\n  const bull = <span className={classes.bullet}>•</span>;\n\n  const [password, setPassword] = useState({\n    newPass: \"\",\n    confirmPass: \"\",\n  });\n\n  const { newPass, confirmPass } = password;\n\n  const onChange = (e) => {\n    setPassword({ ...password, [e.target.name]: e.target.value });\n  };\n  return (\n    <>\n      <div className=\"container mt-5 pt-5\">\n        <div className=\"row align-items-center justify-content-center\">\n          <div className=\"col-12 col-md-6\">\n            <Card className={classes.root} variant=\"outlined\">\n              <CardContent>\n                <Typography variant=\"h5\" component=\"h2\">\n                  Forgot Password\n                </Typography>\n                <form className={classes.form} noValidate autoComplete=\"off\">\n                  <TextField\n                    disabled={otpSent}\n                    id=\"outlined-basic\"\n                    label=\"Email*\"\n                    name=\"email\"\n                    variant=\"outlined\"\n                    type=\"email\"\n                    onChange={(e) => setEmail(e.target.value)}\n                    style={{ marginBottom: \"10px\" }}\n                  />\n\n                  <Button\n                    variant=\"contained\"\n                    color=\"primary\"\n                    onClick={(e) => {\n                      console.log(\"Reset function\");\n                      otpButton(e);\n                    }}\n                  >\n                    Send OTP\n                  </Button>\n                  <br />\n                  {otpSent && (\n                    <div>\n                      <TextField\n                        id=\"outlined-basic\"\n                        label=\"OTP*\"\n                        name=\"otp\"\n                        type=\"password\"\n                        variant=\"outlined\"\n                        onChange={(e) => setOtp(e.target.value)}\n                        style={{ marginBottom: \"10px\" }}\n                      />\n                      <br />\n                      <ColorButton\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={(e) => {\n                          console.log(\"verify function\");\n                          verifyOtpButton(e);\n                        }}\n                      >\n                        Verify Otp\n                      </ColorButton>\n                    </div>\n                  )}\n                  <br />\n                  {showPassword && (\n                    <div>\n                      <TextField\n                        id=\"outlined-basic\"\n                        label=\"New Password*\"\n                        name=\"newPass\"\n                        type=\"password\"\n                        variant=\"outlined\"\n                        onChange={onChange}\n                        style={{ marginBottom: \"10px\" }}\n                      />\n                      <TextField\n                        label=\"Password*\"\n                        label=\"Confirm Password*\"\n                        name=\"confirmPass\"\n                        type=\"password\"\n                        variant=\"outlined\"\n                        onChange={onChange}\n                        style={{ marginBottom: \"10px\" }}\n                      />\n                      <ColorButton\n                        variant=\"contained\"\n                        color=\"primary\"\n                        onClick={(e) => {\n                          console.log(\"new password function\");\n                          setNewPassword(e);\n                        }}\n                      >\n                        Submit\n                      </ColorButton>\n                    </div>\n                  )}\n                </form>\n              </CardContent>\n              <div>\n                {showSpinner ? (\n                  <div>\n                    <span style={{ marginLeft: \"10px\", color: \"#ff0000\" }}>\n                      <h5>Please DO NOT REFRESH the page...</h5>\n                    </span>\n                    <CircularProgress\n                      style={{\n                        color: \"#18D26E\",\n                      }}\n                    />\n                  </div>\n                ) : (\n                  <div></div>\n                )}\n              </div>\n              <CardActions\n                style={{ justifyContent: \"center\", fontWeight: \"bold\" }}\n              ></CardActions>\n            </Card>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default ResetPassword;\n"]},"metadata":{},"sourceType":"module"}